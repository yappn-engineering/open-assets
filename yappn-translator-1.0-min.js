Object.size=function(e){var t=0,n;for(n in e){if(e.hasOwnProperty(n))t++}return t};var jQuery;var pluginGlobal=Object.create(null);pluginGlobal.languagePack1={en:"English",af:"Afrikaans",sq:"Albanian",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bg:"Bulgarian",ca:"Catalan",zhs:"Chinese (Simplified)",zht:"Chinese (Traditional)",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",he:"Hebrew",hi:"Hindi",mww:"Hmong Daw",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",kn:"Kannada",ko:"Korean",lo:"Laos",la:"Latin",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",ta:"Tamil",te:"Telugu",th:"Thai",tr:"Turkish",uk:"Ukrainian",ur:"Urdu",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"};pluginGlobal.languagePack2={afr:"Afrikaans",sqi:"Albanian",ara:"Arabic",hye:"Armenian",arm:"Armenian-DEPRECATED",aze:"Azerbaijani",eus:"Basque",bas:"Basque-DEPRECATED",bel:"Belarusian",bul:"Bulgarian",cat:"Catalan",zho:"Chinese",zhs:"Chinese Simplified",zht:"Chinese Traditional",zhh:"Chinese-DEPRECATED",hrv:"Croatian",ces:"Czech",dan:"Danish",nld:"Dutch",eng:"English",epo:"Esperanto",est:"Estonian",fil:"Filipino",fin:"Finnish",fra:"French",glg:"Galician",kat:"Georgian",geo:"Georgian-DEPRECATED",deu:"German",ell:"Greek",hat:"Haitian creole",htc:"Haitian creole-DEPRECATED",hau:"Hausa",heb:"Hebrew",hin:"Hindi",hmn:"Hmong Daw",mww:"Hmong Daw-DEPRECATED",hun:"Hungarian",isl:"Icelandic",ind:"Indonesian",gle:"Irish",ita:"Italian",jpn:"Japanese",kor:"Korean",lat:"Latin",lav:"Latvian",lit:"Lithuanian",li4:"Lithuanian-DEPRECATED",mkd:"Macedonian",msa:"Malay",mlt:"Maltese",mon:"Mongolian",nor:"Norwegian",fas:"Persian",pol:"Polish",por:"Portuguese",ron:"Romanian",rus:"Russian",srp:"Serbian",slk:"Slovak",slv:"Slovenian",som:"Somali",spa:"Spanish",swa:"Swahili",swe:"Swedish",tha:"Thai",tur:"Turkish",ukr:"Ukrainian",urd:"Urdu",vie:"Vietnamese",cym:"Welsh",yid:"Yiddish"};(function(e){"use strict";function r(e){return window.escape(e)}function i(e){return window.unescape(e)}function s(r){this.options=e.extend({},n,r);this.defaults=n;this.name=t;this.tVars={startedOn:null,completedOn:null,inProgress:false,timeConsumed:null,maxTimeout:6e4,textInProgress:false,imageInProgress:false,placeholderInProgress:false,titleInProgress:false};if(this.options.availableLanguages.length>0){this.options.availableLanguages=this.options.availableLanguages.split(",")}this.init()}var t="translate",n={initiated:false,apiUrl:"otstest.cloudapp.net/ots.svc/translate",key:"",domainName:window.location.host||document.domain||"",protocol:document.location.protocol?document.location.protocol.replace(":",""):"http",urlTemplate:"{PROTOCOL}://{URL}?credential={CREDENTIAL}&domain={DOMAINNAME}&from={FROMLANG}&to={TOLANG}&input={TEXT}&callback=?",cookieName:"ortsbojsLangCookie",minTimeout:6e4,targetId:"",translateOnLoad:true,dropdown:true,enabled:true,translatePlaceholder:true,translateTitle:true,debugEnabled:false,assumeEN:true,languages:pluginGlobal.languagePack1,beforeTranslate:null,afterTranslate:null,beforeInit:null,afterInit:null,defaultLanguage:"",targetLanguage:"",textSelector:"",excludeTextSelector:"",availableLanguages:[],imageSelector:"",excludeImageSelector:"",imgAttribute:"data-src",consoleId:"#console",assetsPath:"assets/",imageData:[],loaderImage:"https://raw.githubusercontent.com/yappn-engineering/open-assets/master/loader-black.gif",loaderImageClass:"",loaderImageStyle:"",loaderContainerId:"#ortsbo-loader-image",loaderContainerClass:"",loaderContainerStyle:"",dropDownClass:"",dropDownStyle:"",dropDownId:"#ortsbo-lang-dropdown",pluginContainerId:"#orstbo-container",pluginContainerClass:"",pluginContainerStyle:""};s.prototype.init=function(){var t=this,n=e(t.options.textSelector).not(t.options.pluginContainerId).not(t.options.excludeTextSelector);t.debug("OrtbsoJS initialized.");if(typeof t.options.beforeInit==="function"){t.options.beforeInit()}if(t.options.key===""){console.log("[OrtsboJS Error] Missing Ortsbo API KEY. Translation has been disabled.");t.options.enabled=false;return}if(t.options.textSelector===""){console.log("[OrtsboJS Error] Could not get dom target elements for translation. Translation has been disabled.");t.options.enabled=false;return}if(t.options.defaultLanguage===""){console.log("[OrtsboJS Error] Could not get default language of the document for translation. Translation has been disabled.");t.options.enabled=false;return}if(true===t.options.dropdown){t.createLanguageList()}else{t.options.targetLanguage=t.options.targetLanguage||e.cookie(this.options.cookieName)||t.detectBrowserLanguage;t.startTranslate()}n.each(function(){var n=e(this),i=n.attr("lang")||"",s=n.html();if(i!==""){n.data(i,r(s));n.attr("data-ortsbo-seeked-lang",false)}if(i===""&&t.options.assumeEN){n.data(i,r(s));n.attr("lang",t.options.defaultLanguage);n.attr("data-ortsbo-seeked-lang",false);i=t.options.defaultLanguage}});if(Object.size(t.options.availableLanguages)===0){e.each(t.options.languages,function(e){t.options.availableLanguages.push(e)})}if(typeof t.options.afterInit==="function"){t.options.afterInit()}};s.prototype.update=function(){if(this.options.initiated){this.debug("Update Method called.");this.startTranslate()}else{return}};s.prototype.debug=function(t){if(!this.options.debugEnabled){return}if(e(this.consoleId).length>0){e(this.consoleId).prepend(t+"<hr>")}else if(console!==undefined){console.log(t)}};s.prototype.getDetectedLanguage=function(){if(e.cookie(this.options.cookieName)){this.debug("Found ortsbo cookie ["+e.cookie(this.options.cookieName)+"], using it.");return e.cookie(this.options.cookieName)}this.debug("No Cookie found and nothing passed in the parameters, so trying to client-size auto-detect");return this.options.defaultLanguage};s.prototype.startTranslate=function(){var e=this,t;e.tVars.startedOn=(new Date).getTime();e.tVars.inProgress=true;e.tVars.timeConsumed=null;e.loader(true);if(typeof e.options.beforeTranslate==="function"){e.options.beforeTranslate()}t=setInterval(function(){var n=(new Date).getTime();if(true===e.tVars.inProgress){if(false===e.tVars.textInProgress&&false===e.tVars.imageInProgress&&false===e.tVars.placeholderInProgress){e.tVars.inProgress=false;e.tVars.completedOn=n;e.tVars.timeConsumed=(e.tVars.completedOn-e.tVars.startedOn)/1e3+" sec";clearInterval(t);e.loader(false)}else if(n-e.tVars.startedOn>=e.tVars.maxTimeout){e.tVars.inProgress=false;clearInterval(t);e.loader(false)}}else{clearInterval(t)}},250);e.seekAndTranslateImages();e.translatePlaceholder();e.seekAndTranslate();e.translateTitle();if(typeof e.options.afterTranslate==="function"){e.options.afterTranslate()}};s.prototype.seekAndTranslate=function(){if(this.options.enabled){var t=this,n=e(t.options.textSelector).not(t.options.pluginContainerId).not(t.options.excludeTextSelector).not('[lang="'+t.options.targetLanguage+'"]'),s=0,o=0;t.tVars.textInProgress=true;n.each(function(){var n=e(this),u=n.html(),a=n.attr("lang")||"",f="";if(u===""||u.length===0){t.debug("missing text? - not going to translate");return}if(a===""&&t.options.assumeEN){t.debug("no lang attribute and assuming english for default.");a=t.options.defaultLanguage}if(a!==""&&t.options.targetLanguage===a){t.debug("current language is the same as this language, not going to translate");return}if(a!==""&&t.options.languages[a]===undefined){t.debug("current language is the same as this language, not going to translate");return}if(n.data(t.options.targetLanguage)){n.html(i(n.data(t.options.targetLanguage)));n.attr("lang",t.options.targetLanguage);t.debug('no need to translate, local cache has: "'+t.options.targetLanguage+'" version.');return}if(n.data(t.options.defaultLanguage)){a=t.options.defaultLanguage;u=i(n.data(t.options.defaultLanguage));t.debug("using local English version for translation as the fromlang")}else if(a===t.options.defaultLanguage){n.data(t.options.defaultLanguage,r(u));u=n.html()}u=u.replace(/(\r\n|\n|\r)/gm," ");u=u.replace(/\s+/g," ");f=t.options.urlTemplate.replace("{PROTOCOL}",t.options.protocol).replace("{URL}",t.options.apiUrl).replace("{DOMAINNAME}",t.options.domainName).replace("{CREDENTIAL}",t.options.key).replace("{FROMLANG}",a).replace("{TOLANG}",t.options.targetLanguage).replace("{TEXT}",r(u));e.ajax({url:f,timeout:t.options.minTimeout+s*1e3,data:"{}",type:"GET",global:false,crossDomain:true,dataType:"jsonp",contentType:"application/json; charset=utf-8",beforeSend:function(){o+=1},complete:function(){s+=1;if(o===s){t.tVars.textInProgress=false}},success:function(e){n.html(e.Translation.replace(/&quot;/g,'"'));n.attr("lang",t.options.targetLanguage);n.data(t.options.targetLanguage,r(e.Translation.replace(/&quot;/g,'"')))},error:function(e){t.debug("Error: "+e.Status+", This was the request URL: "+f)}})});if(0===o){t.tVars.textInProgress=false}}else{this.debug("Translation services disabled.");return}};s.prototype.seekAndTranslateImages=function(){var t=this,n=e(t.options.imageSelector).not(t.options.excludeImageSelector),r,s,o,u;if(t.options.imageData!==undefined){t.options.imageData=[]}n.each(function(){r=e(this);if(r.data(t.options.targetLanguage)){r.attr("src",i(r.data(t.options.targetLanguage)));r.attr("lang",t.options.targetLanguage);t.debug('no need to translate, local cached image has: "'+t.options.targetLanguage+'" version.')}else{s=r.attr(t.options.imgAttribute);o=t.options.assetsPath+t.options.targetLanguage+"/"+s.replace(t.options.assetsPath,"");u=t.options.assetsPath+t.options.defaultLanguage+"/"+s.replace(t.options.assetsPath,"");t.options.imageData.push({obj:r,newLink:o,defaultLink:u})}});t.checkImages()};s.prototype.checkImages=function(t){var n=this,i,s;t=t!==undefined?t:0;if(undefined!==n.options.imageData[t]){n.tVars.imageInProgress=true;s=function(){var e=t+1;if(n.options.imageData.length<=e){n.tVars.imageCompleted=true;n.tVars.imageInProgress=false}else{n.checkImages(e)}};i=e("<img />").attr("src",n.options.imageData[t].newLink);i.load(function(){n.options.imageData[t].obj.attr("src",n.options.imageData[t].newLink).attr("lang",n.options.targetLanguage).data(n.options.targetLanguage,r(n.options.imageData[t].newLink.replace(/&quot;/g,'"')));s()});i.error(function(){n.options.imageData[t].obj.attr("src",n.options.imageData[t].defaultLink);s()})}return};s.prototype.translatePlaceholder=function(){if(this.options.enabled&&this.options.translatePlaceholder){var t=this,n=e('[placeholder!=""][placeholder]').not(t.options.pluginContainerId).not(t.options.excludeTextSelector),s=0,o=0;t.tVars.placeholderInProgress=true;n.each(function(){var n=e(this),u=n.attr("placeholder"),a=n.attr("lang")||"",f="";if(u===""||u.length===0){t.debug("missing text? - not going to translate");return}if(a===""&&t.options.assumeEN){t.debug("no lang attribute and assuming english for default.");a=t.options.defaultLanguage}if(a!==""&&t.options.targetLanguage===a){t.debug("current language is the same as this language, not going to translate");return}if(a!==""&&t.options.languages[a]===undefined){t.debug("current language is the same as this language, not going to translate");return}if(n.data(t.options.targetLanguage+"/placeholder")){n.attr("placeholder",i(n.data(t.options.targetLanguage+"/placeholder")));n.attr("lang",t.options.targetLanguage);t.debug('no need to translate, local cache has: "'+t.options.targetLanguage+'" version.');return}if(n.data(t.options.defaultLanguage+"/placeholder")){a=t.options.defaultLanguage;u=i(n.data(t.options.defaultLanguage+"/placeholder"));t.debug("using local English version for translation as the fromlang")}else if(a===t.options.defaultLanguage){n.data(t.options.defaultLanguage+"/placeholder",r(u));u=n.attr("placeholder")}u=u.replace(/(\r\n|\n|\r)/gm," ");u=u.replace(/\s+/g," ");f=t.options.urlTemplate.replace("{PROTOCOL}",t.options.protocol).replace("{URL}",t.options.apiUrl).replace("{DOMAINNAME}",t.options.domainName).replace("{CREDENTIAL}",t.options.key).replace("{FROMLANG}",a).replace("{TOLANG}",t.options.targetLanguage).replace("{TEXT}",r(u));e.ajax({url:f,timeout:t.options.minTimeout+s*1e3,data:"{}",type:"GET",global:false,crossDomain:true,dataType:"jsonp",contentType:"application/json; charset=utf-8",beforeSend:function(){o+=1},complete:function(){s+=1;if(o===s){t.tVars.placeholderInProgress=false}},success:function(e){n.attr("placeholder",e.Translation.replace(/&quot;/g,'"'));n.attr("lang",t.options.targetLanguage);n.data(t.options.targetLanguage+"/placeholder",r(e.Translation.replace(/&quot;/g,'"')))},error:function(e){t.debug("Error: "+e.Status+", This was the request URL: "+f)}})});if(0===o){t.tVars.placeholderInProgress=false}}else{this.debug("Translation services disabled.");return}};s.prototype.translateTitle=function(){if(this.options.enabled&&this.options.translateTitle){var t=this,n=e('[title!=""][title]').not(t.options.pluginContainerId).not(t.options.excludeTextSelector),s=0,o=0;t.tVars.titleInProgress=true;n.each(function(){var n=e(this),u=n.attr("title"),a=n.attr("lang")||"",f="";if(u===""||u.length===0){t.debug("missing text? - not going to translate");return}if(a===""&&t.options.assumeEN){t.debug("no lang attribute and assuming english for default.");a=t.options.defaultLanguage}if(a!==""&&t.options.targetLanguage===a){t.debug("current language is the same as this language, not going to translate");return}if(a!==""&&t.options.languages[a]===undefined){t.debug("current language is the same as this language, not going to translate");return}if(n.data(t.options.targetLanguage+"/title")){n.attr("title",i(n.data(t.options.targetLanguage+"/title")));n.attr("lang",t.options.targetLanguage);t.debug('no need to translate, local cache has: "'+t.options.targetLanguage+'" version.');return}if(n.data(t.options.defaultLanguage+"/title")){a=t.options.defaultLanguage;u=i(n.data(t.options.defaultLanguage+"/title"));t.debug("using local English version for translation as the fromlang")}else if(a===t.options.defaultLanguage){n.data(t.options.defaultLanguage+"/title",r(u));u=n.attr("title")}u=u.replace(/(\r\n|\n|\r)/gm," ");u=u.replace(/\s+/g," ");f=t.options.urlTemplate.replace("{PROTOCOL}",t.options.protocol).replace("{URL}",t.options.apiUrl).replace("{DOMAINNAME}",t.options.domainName).replace("{CREDENTIAL}",t.options.key).replace("{FROMLANG}",a).replace("{TOLANG}",t.options.targetLanguage).replace("{TEXT}",r(u));e.ajax({url:f,timeout:t.options.minTimeout+s*1e3,data:"{}",type:"GET",global:false,crossDomain:true,dataType:"jsonp",contentType:"application/json; charset=utf-8",beforeSend:function(){o+=1},complete:function(){s+=1;if(o===s){t.tVars.titleInProgress=false}},success:function(e){n.attr("title",e.Translation.replace(/&quot;/g,'"'));n.attr("lang",t.options.targetLanguage);n.data(t.options.targetLanguage+"/placeholder",r(e.Translation.replace(/&quot;/g,'"')))},error:function(e){t.debug("Error: "+e.Status+", This was the request URL: "+f)}})});if(0===o){t.tVars.titleInProgress=false}}else{this.debug("Translation services disabled.");return}};s.prototype.createLanguageList=function(){var t=this,n='<option value="">Select Language</option>',r=t.targetElement||e(t.options.pluginContainerId);if(r.length<1){console.error("Target element not found. Translation disabled.")}if(e(t.options.dropDownId).length===0){if(t.options.availableLanguages.length<1){e.each(t.options.languages,function(r,i){n+='<option value="'+r+'" '+(r===e.cookie(t.options.cookieName)?"selected":"")+">"+i+"</option>"})}else{e.each(t.options.availableLanguages,function(r,i){if(t.options.languages[i]!==undefined){var s=e.cookie(t.options.cookieName);n+='<option value="'+i+'" '+(i===s?"selected":"")+' count="'+r+'">'+t.options.languages[i]+"</option>"}})}e(r).addClass(t.options.pluginContainerClass).css("cssText",t.options.pluginContainerStyle);e("<select></select>").attr("id",t.options.dropDownId.replace("#","")).html(n).addClass(t.options.dropDownClass).css("cssText",t.options.dropDownStyle).appendTo(r).change(function(n){if(e(this).find("option:selected").attr("value")==""){n.preventDefault();return false}else{t.options.targetLanguage=e(this).find("option:selected").attr("value");t.options.initiated=true;e.cookie(t.options.cookieName,t.options.targetLanguage,{path:"/"});t.update()}}).trigger("change");e("<div><img/></div>").attr("id",t.options.loaderContainerId.replace("#","")).addClass(t.options.loaderContainerClass).css("cssText",t.options.loaderContainerStyle+";display:none;").appendTo(r).find("img").attr("src",t.options.loaderImage).addClass(t.options.loaderImageClass).css("cssText",t.options.loaderImageStyle)}};s.prototype.loader=function(t){t=undefined!==t?t:true;if(true===t){e(this.options.dropDownId).hide();e(this.options.loaderContainerId).show()}else{e(this.options.dropDownId).show();e(this.options.loaderContainerId).hide()}};e[t]=function(e){return new s(e)}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){if(e.indexOf('"')===0){e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{e=decodeURIComponent(e.replace(t," "));return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g;var u=e.cookie=function(t,s,a){if(arguments.length>1&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires==="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{};var h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");var m=r(v.shift());var g=v.join("=");if(t&&t===m){c=o(g,s);break}if(!t&&(g=o(g))!==undefined){c[m]=g}}return c};u.defaults={};e.removeCookie=function(t,n){if(e.cookie(t)===undefined){return false}e.cookie(t,"",e.extend({},n,{expires:-1}));return!e.cookie(t)}})